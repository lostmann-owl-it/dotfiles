#!/bin/bash
set -e

echo "ğŸ› ï¸ Starte yadm bootstrap..."

# ----- Vim Plug installieren -----
if [ ! -f ~/.vim/autoload/plug.vim ]; then
  echo "ğŸ“¦ Installiere vim-plug fÃ¼r Vim..."
  curl -fLo ~/.vim/autoload/plug.vim --create-dirs \
       https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
else
  echo "âœ… vim-plug ist bereits installiert."
fi

# ----- Tmux Plugin Manager (TPM) -----
if [ ! -d ~/.tmux/plugins/tpm ]; then
  echo "ğŸ”Œ Klone tmux plugin manager (TPM)..."
  git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
else
  echo "âœ… TPM (Tmux Plugin Manager) ist bereits installiert."
fi

# ----- Starship -----
if ! command -v starship &> /dev/null; then
  echo "ğŸš€ Starship ist nicht installiert."
  read -p "ğŸ‘‰ MÃ¶chtest du Starship jetzt installieren? [y/N]: " INSTALL_STARSHIP
  if [[ "$INSTALL_STARSHIP" =~ ^[Yy]$ ]]; then
    curl -sS https://starship.rs/install.sh | sh
    echo "âœ… Starship wurde installiert."
  else
    echo "âš ï¸ Starship wird Ã¼bersprungen."
  fi
else
  echo "âœ… Starship ist bereits installiert."
fi

# ----- Vim Plugins installieren -----
echo "ğŸ’¡ Starte Vim Plugin Installation..."
vim +PlugInstall +qall </dev/tty

# ----- LazyVim Hinweis -----
if [ -d ~/.config/nvim/lua ]; then
  echo "ğŸ“¦ Neovim-Setup erkannt. LazyVim wird erwartet."
  echo "   Du kannst Plugins via :Lazy sync in Neovim verwalten."
fi

# ----- Hinweis fÃ¼r Tmux Plugin Installation -----
echo "ğŸ§© Starte Tmux-Plugin Installation manuell mit:"
echo "     <prefix> + I  (Shift + i) innerhalb von Tmux"

echo "âœ… yadm bootstrap abgeschlossen!"

